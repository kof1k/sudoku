# Веб-гра "Судоку"

## Шкільний проект з інформатики

**Тип проекту:** Веб-додаток
**Технології:** Python, Django, PostgreSQL, JavaScript, HTML5, CSS3
**Рік виконання:** 2024-2025

---

## Зміст

1. [Вступ](#вступ)
2. [Мета та завдання проекту](#мета-та-завдання-проекту)
3. [Теоретична частина](#теоретична-частина)
4. [Функціональні можливості](#функціональні-можливості)
5. [Технології та інструменти](#технології-та-інструменти)
6. [Структура проекту](#структура-проекту)
7. [Опис модулів](#опис-модулів)
8. [Інструкція з встановлення](#інструкція-з-встановлення)
9. [Інструкція користувача](#інструкція-користувача)
10. [Висновки](#висновки)

---

## Вступ

### Що таке Судоку?

**Судоку** (яп. 数独, "одинокі числа") — це логічна головоломка-гра з числами. Класичне судоку складається з квадратної таблиці 9×9, розділеної на 9 квадратів 3×3 (так звані "регіони" або "блоки").

### Правила гри

1. Поле розміром 9×9 клітинок розділене на 9 квадратів 3×3
2. В кожній клітинці має бути число від 1 до 9
3. Кожне число може зустрічатися тільки один раз:
   - У кожному рядку
   - У кожному стовпці
   - У кожному квадраті 3×3

### Історія судоку

Судоку з'явилося в кінці 1970-х років в Японії. Гра стала популярною в усьому світі на початку 2000-х років. Назва "судоку" походить від японського виразу "Suuji wa dokushin ni kagiru" (数字は独身に限る), що означає "цифри мають бути одиничними".

---

## Мета та завдання проекту

### Мета проекту

Розробити інтерактивний веб-додаток для гри в судоку з можливістю:
- Генерації нових головоломок різної складності
- Відстеження прогресу гравців
- Соціальної взаємодії між користувачами

### Завдання проекту

1. **Вивчити** алгоритми генерації та розв'язання судоку
2. **Розробити** серверну частину на фреймворку Django
3. **Створити** інтуїтивно зрозумілий інтерфейс користувача
4. **Реалізувати** систему авторизації та реєстрації
5. **Впровадити** таблицю лідерів та систему чату
6. **Забезпечити** адаптивний дизайн для мобільних пристроїв

### Актуальність проекту

- Судоку розвиває логічне мислення та концентрацію
- Веб-версія доступна з будь-якого пристрою
- Соціальні функції підвищують мотивацію гравців
- Проект демонструє сучасні технології веб-розробки

---

## Теоретична частина

### Алгоритм генерації судоку

Для генерації головоломок використовується **алгоритм backtracking** (алгоритм з поверненням):

#### Етапи генерації:

1. **Створення повної дошки**
   - Ініціалізація порожньої сітки 9×9
   - Послідовне заповнення клітинок числами 1-9
   - Перевірка валідності кожного числа
   - Якщо число не підходить — повернення назад (backtracking)

2. **Створення головоломки**
   - Копіювання повної дошки
   - Випадкове видалення клітинок залежно від складності:
     - **Easy** (Легко): видаляється 30 клітинок (залишається 51)
     - **Medium** (Середньо): видаляється 40 клітинок (залишається 41)
     - **Hard** (Складно): видаляється 50 клітинок (залишається 31)

#### Псевдокод алгоритму:

```
Функція ЗАПОВНИТИ_ДОШКУ(дошка):
    Для кожної клітинки (i, j):
        Якщо клітинка порожня:
            Для кожного числа від 1 до 9 (випадковий порядок):
                Якщо число ВАЛІДНЕ(дошка, i, j, число):
                    Поставити число в клітинку
                    Якщо ЗАПОВНИТИ_ДОШКУ(дошка) = УСПІХ:
                        Повернути УСПІХ
                    Очистити клітинку (backtracking)
            Повернути НЕВДАЧА
    Повернути УСПІХ

Функція ВАЛІДНЕ(дошка, рядок, колонка, число):
    Перевірити чи число НЕ в рядку
    Перевірити чи число НЕ в колонці
    Перевірити чи число НЕ в блоці 3×3
    Повернути результат
```

### Архітектура MVC

Проект побудований на архітектурному шаблоні **MVC** (Model-View-Controller):

```
┌─────────────────────────────────────────────────────────┐
│                    Користувач                           │
└─────────────────────┬───────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────┐
│              Controller (Views)                         │
│  - Обробка HTTP запитів                                │
│  - Бізнес-логіка                                        │
│  - Взаємодія з моделями                                 │
└──────────┬────────────────────────────┬─────────────────┘
           │                            │
           ▼                            ▼
┌─────────────────────┐    ┌─────────────────────────────┐
│   Model (Моделі)    │    │      View (Шаблони)         │
│  - GameResult       │    │  - HTML шаблони             │
│  - ChatMessage      │    │  - CSS стилі                │
│  - User             │    │  - JavaScript               │
└──────────┬──────────┘    └─────────────────────────────┘
           │
           ▼
┌─────────────────────┐
│    База даних       │
│    (PostgreSQL)     │
└─────────────────────┘
```

### Клієнт-серверна архітектура

```
┌──────────────────────────────────────────────────────────────────┐
│                         КЛІЄНТ (Браузер)                         │
├──────────────────────────────────────────────────────────────────┤
│  ┌────────────┐  ┌────────────┐  ┌────────────┐                  │
│  │   HTML5    │  │   CSS3     │  │ JavaScript │                  │
│  │  Шаблони   │  │   Стилі    │  │   Логіка   │                  │
│  └────────────┘  └────────────┘  └────────────┘                  │
│                                                                  │
│  Файли: game.html, sudoku.js, chat.js, style.css                │
└────────────────────────────┬─────────────────────────────────────┘
                             │ HTTP (JSON)
                             ▼
┌──────────────────────────────────────────────────────────────────┐
│                        СЕРВЕР (Django)                           │
├──────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐   │
│  │   URL Router    │  │     Views       │  │     Models      │   │
│  │   (urls.py)     │  │   (views.py)    │  │   (models.py)   │   │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘   │
│                                                                  │
│  Файли: views.py, models.py, urls.py                            │
└────────────────────────────┬─────────────────────────────────────┘
                             │ SQL (ORM)
                             ▼
┌──────────────────────────────────────────────────────────────────┐
│                    БАЗА ДАНИХ (PostgreSQL)                       │
├──────────────────────────────────────────────────────────────────┤
│  Таблиці: auth_user, sudoku_gameresult, sudoku_chatmessage       │
└──────────────────────────────────────────────────────────────────┘
```

---

## Функціональні можливості

### 1. Система авторизації

| Функція | Опис |
|---------|------|
| Реєстрація | Створення нового акаунту з username, email та паролем |
| Вхід | Авторизація за username та паролем |
| Вихід | Завершення сесії користувача |
| Сесії | Збереження стану авторизації між запитами |

### 2. Гра в Судоку

| Функція | Опис |
|---------|------|
| Генерація | Автоматичне створення нових головоломок |
| Складність | Три рівні: Easy, Medium, Hard |
| Таймер | Відстеження часу розв'язання |
| Помилки | Лічильник помилок (максимум 3) |
| Підказки | Система підказок (максимум 3) |
| Нотатки | Режим для позначок можливих варіантів |
| Підсвічування | Виділення пов'язаних клітинок |
| Автоперемога | Автоматичне визначення розв'язання |

### 3. Таблиця лідерів

| Функція | Опис |
|---------|------|
| Рейтинг | Топ-50 гравців за часом |
| Фільтри | Сортування за складністю |
| Статистика | Час, підказки, дата завершення |

### 4. Чат гравців

| Функція | Опис |
|---------|------|
| Повідомлення | Відправка текстових повідомлень |
| Оновлення | Автоматичне оновлення кожні 3 секунди |
| Історія | Збереження останніх 50 повідомлень |

---

## Технології та інструменти

### Backend (Серверна частина)

| Технологія | Версія | Призначення |
|------------|--------|-------------|
| **Python** | 3.10+ | Мова програмування |
| **Django** | 5.0 | Веб-фреймворк |
| **PostgreSQL** | 15+ | База даних |
| **psycopg2** | 2.9.11 | Адаптер PostgreSQL для Python |
| **dj-database-url** | 3.0.1 | Парсер URL бази даних |

### Frontend (Клієнтська частина)

| Технологія | Призначення |
|------------|-------------|
| **HTML5** | Семантична розмітка сторінок |
| **CSS3** | Стилізація та анімації |
| **JavaScript** | Інтерактивність та логіка гри |

### Інструменти розробки

| Інструмент | Призначення |
|------------|-------------|
| **Git** | Система контролю версій |
| **Poetry** | Управління залежностями Python |
| **Ruff** | Лінтер коду |
| **VS Code** | Редактор коду |

---

## Структура проекту

```
sudoku/
├── manage.py                 # Django CLI утиліта
├── pyproject.toml            # Конфігурація проекту
├── poetry.lock               # Версії залежностей
│
├── django_project/           # Головна конфігурація Django
│   ├── __init__.py
│   ├── settings.py           # Налаштування проекту
│   ├── urls.py               # Головна маршрутизація
│   ├── wsgi.py               # WSGI конфігурація
│   └── asgi.py               # ASGI конфігурація
│
├── sudoku/                   # Основний додаток
│   ├── __init__.py
│   ├── apps.py               # Конфігурація додатку
│   ├── models.py             # Моделі бази даних
│   ├── views.py              # Обробники запитів
│   ├── urls.py               # Маршрути додатку
│   ├── admin.py              # Адміністрування
│   ├── tests.py              # Тести
│   └── migrations/           # Міграції бази даних
│
├── templates/                # HTML шаблони
│   ├── base.html             # Базовий шаблон
│   ├── home.html             # Головна сторінка
│   ├── game.html             # Гральна сторінка
│   ├── leaderboard.html      # Таблиця лідерів
│   ├── chat.html             # Чат гравців
│   └── registration/         # Шаблони авторизації
│       ├── login.html
│       └── register.html
│
├── static/                   # Статичні файли
│   ├── css/
│   │   └── style.css         # Всі стилі (824 рядки)
│   └── js/
│       ├── main.js           # Загальний функціонал
│       ├── sudoku.js         # Логіка гри (394 рядки)
│       └── chat.js           # Функціонал чату
│
└── docs/                     # Документація
    ├── README.md             # Цей файл
    ├── Architecture.md       # Архітектура проекту
    ├── Algorithms.md         # Опис алгоритмів
    ├── API.md                # Документація API
    ├── Database.md           # Структура БД
    └── Installation.md       # Інструкція встановлення
```

---

## Опис модулів

### models.py — Моделі даних

#### Клас `GameResult`
Зберігає результати завершених ігор.

```python
class GameResult(models.Model):
    user = ForeignKey(User)           # Гравець
    difficulty = CharField()          # Складність: easy/medium/hard
    time_seconds = IntegerField()     # Час розв'язання (секунди)
    hints_used = IntegerField()       # Використано підказок (0-3)
    completed = BooleanField()        # Чи завершено
    created_at = DateTimeField()      # Дата завершення
```

#### Клас `ChatMessage`
Зберігає повідомлення чату.

```python
class ChatMessage(models.Model):
    user = ForeignKey(User)           # Автор
    message = TextField()             # Текст (до 500 символів)
    created_at = DateTimeField()      # Час відправки
```

#### Клас `SudokuGenerator`
Генератор головоломок з методами:
- `generate_full_board()` — генерація повної дошки
- `create_puzzle(difficulty)` — створення головоломки
- `check_solution()` — перевірка рішення

### views.py — Обробники запитів

| Функція | Метод | URL | Опис |
|---------|-------|-----|------|
| `home` | GET | `/` | Головна сторінка |
| `register_view` | GET/POST | `/register/` | Реєстрація |
| `login_view` | GET/POST | `/login/` | Вхід |
| `logout_view` | GET | `/logout/` | Вихід |
| `game_view` | GET | `/game/` | Початок гри |
| `submit_game` | POST | `/game/submit/` | Збереження результату |
| `get_hint` | GET | `/game/hint/` | Отримання підказки |
| `leaderboard_view` | GET | `/leaderboard/` | Таблиця лідерів |
| `chat_view` | GET | `/chat/` | Сторінка чату |
| `send_message` | POST | `/chat/send/` | Відправка повідомлення |
| `get_messages` | GET | `/chat/messages/` | Отримання повідомлень |

### sudoku.js — Логіка гри

| Функція | Опис |
|---------|------|
| `buildBoard()` | Побудова DOM структури дошки 9×9 |
| `handleCellClick()` | Обробка кліку на клітинку |
| `enterNumber()` | Введення числа з валідацією |
| `updateHighlighting()` | Оновлення підсвічування клітинок |
| `checkWin()` | Перевірка умови перемоги |
| `showWin()` | Відображення модального вікна перемоги |
| `showGameOver()` | Відображення модального вікна програшу |
| `toggleNotesMode()` | Перемикання режиму нотаток |
| `getHint()` | Запит підказки з сервера |
| `startTimer()` | Запуск таймера |
| `navigateCell()` | Навігація клавіатурою |

---

## Інструкція з встановлення

### Системні вимоги

- **Python** 3.10 або новіший
- **PostgreSQL** 15 або новіший
- **Git** для клонування репозиторію

### Крок 1: Клонування репозиторію

```bash
git clone https://github.com/username/sudoku.git
cd sudoku
```

### Крок 2: Встановлення залежностей

```bash
# Встановлення Poetry (якщо не встановлено)
pip install poetry

# Встановлення залежностей проекту
poetry install
```

### Крок 3: Налаштування бази даних

```bash
# Вхід в PostgreSQL
sudo -u postgres psql

# Створення бази даних
CREATE DATABASE sudoku_db;
CREATE USER sudoku_user WITH PASSWORD 'password';
GRANT ALL PRIVILEGES ON DATABASE sudoku_db TO sudoku_user;
\q
```

### Крок 4: Налаштування змінних середовища

```bash
export DATABASE_URL="postgresql://sudoku_user:password@localhost:5432/sudoku_db"
export SECRET_KEY="your-secret-key-here"
```

### Крок 5: Застосування міграцій

```bash
python manage.py migrate
```

### Крок 6: Запуск сервера

```bash
python manage.py runserver 0.0.0.0:5000
```

### Крок 7: Відкриття в браузері

Відкрийте http://localhost:5000

---

## Інструкція користувача

### Реєстрація та вхід

1. Натисніть кнопку **Register** на головній сторінці
2. Введіть ім'я користувача, email (опціонально) та пароль
3. Після реєстрації увійдіть за допомогою кнопки **Login**

### Початок гри

1. На головній сторінці виберіть рівень складності:
   - **Easy** — для початківців (51 заповнена клітинка)
   - **Medium** — середній рівень (41 заповнена клітинка)
   - **Hard** — для досвідчених (31 заповнена клітинка)
2. Натисніть на обраний рівень

### Управління грою

#### Введення чисел
1. Натисніть на порожню клітинку
2. Виберіть число на панелі знизу (1-9)
3. Для видалення числа натисніть **X**

#### Режим нотаток
1. Натисніть кнопку **Notes** для активації
2. Додавайте можливі варіанти в клітинку
3. Нотатки автоматично видаляються при введенні числа

#### Підказки
1. Натисніть кнопку **Hint** для підказки
2. Доступно лише 3 підказки за гру
3. Підказка показує правильне число для вибраної клітинки

#### Помилки
- При введенні неправильного числа додається помилка
- Максимум 3 помилки — потім гра закінчується програшем

### Таблиця лідерів

1. Перейдіть до **Leaderboard** через меню
2. Перегляньте топ-50 гравців
3. Фільтруйте за складністю: All / Easy / Medium / Hard

### Чат

1. Перейдіть до **Chat** через меню
2. Введіть повідомлення та натисніть **Send**
3. Повідомлення автоматично оновлюються кожні 3 секунди

---

## Висновки

### Результати проекту

У результаті виконання проекту було створено повнофункціональний веб-додаток для гри в судоку з наступними особливостями:

1. **Автоматична генерація** — алгоритм backtracking створює унікальні головоломки
2. **Три рівні складності** — від легкого до складного
3. **Система авторизації** — реєстрація та вхід користувачів
4. **Таблиця лідерів** — мотивація через змагання
5. **Соціальний чат** — спілкування між гравцями
6. **Адаптивний дизайн** — підтримка мобільних пристроїв
7. **Інтуїтивний інтерфейс** — легкість використання

### Набуті навички

- Розробка веб-додатків на Django
- Робота з базами даних PostgreSQL
- Створення інтерактивних інтерфейсів на JavaScript
- Застосування алгоритмів (backtracking)
- Проектування клієнт-серверної архітектури

### Можливості для розвитку

- Додавання нових режимів гри (турніри, мультиплеєр)
- Інтеграція з соціальними мережами
- Статистика та досягнення гравців
- Мобільний додаток

---

## Використані джерела

1. Django Documentation — https://docs.djangoproject.com/
2. PostgreSQL Documentation — https://www.postgresql.org/docs/
3. MDN Web Docs — https://developer.mozilla.org/
4. Sudoku Algorithms — https://en.wikipedia.org/wiki/Sudoku_solving_algorithms
5. CSS Tricks — https://css-tricks.com/

---

**Автор проекту:** [Ваше ім'я]
**Дата завершення:** 2024-2025
**Ліцензія:** MIT License
